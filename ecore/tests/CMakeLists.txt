#############################################################################
#                                                                           #
#             CMakeList created by soft.generator.cpp Generator             # 
#                                                                           #
#############################################################################

# C++ project for model ecore.ecore, generated by soft.generator.cpp

CMAKE_MINIMUM_REQUIRED(VERSION 3.12)

project(ecore.tests CXX)

#cmake module path
get_filename_component(CMAKE_PATH "cmake" ABSOLUTE)
list(APPEND CMAKE_MODULE_PATH ${CMAKE_PATH})

if(NOT CMAKE_BUILD_TYPE) 
    set(CMAKE_BUILD_TYPE Debug)
endif()
set(CMAKE_DEBUG_POSTFIX d)

set(CMAKE_CXX_STANDARD 17)

# dependencies
set(Boost_USE_STATIC_LIBS ON)
find_package(Boost REQUIRED unit_test_framework)
find_package(Turtle)

include( CMakeFiles.txt OPTIONAL)
include( CMakeGenerated.txt OPTIONAL)

# files
set(CMAKE_FILES
    CMakeLists.txt
)
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/CMakeFiles.txt")
   list(APPEND CMAKE_FILES "CMakeFiles.txt")
endif()
if(EXISTS "${CMAKE_CURRENT_SOURCE_DIR}/CMakeGenerated.txt")
   list(APPEND CMAKE_FILES "CMakeGenerated.txt")
endif()

# executable
add_executable(${PROJECT_NAME} ${CMAKE_FILES} 
                               ${GENERATED_HEADER_ECORE_FILES}
                               ${GENERATED_HEADER_ECORE_TESTS_FILES}
                               ${GENERATED_HEADER_FILES}
                               ${GENERATED_SOURCE_ECORE_FILES}
                               ${GENERATED_SOURCE_ECORE_TESTS_FILES}
                               ${GENERATED_SOURCE_FILES}
                               ${HEADER_ECORE_FILES}
                               ${HEADER_ECORE_TESTS_FILES}
                               ${HEADER_FILES}
                               ${SOURCE_ECORE_FILES}
                               ${SOURCE_ECORE_TESTS_FILES}
                               ${SOURCE_FILES}
)
target_include_directories(${PROJECT_NAME} PUBLIC src src-gen)
target_compile_options(${PROJECT_NAME} PRIVATE /MP /wd4250 /bigobj)
target_compile_definitions(${PROJECT_NAME} PRIVATE _SILENCE_CXX17_CODECVT_HEADER_DEPRECATION_WARNING)
target_link_libraries(${PROJECT_NAME} ecore.static Turtle::Turtle Boost::unit_test_framework)

# Visual studio specific project layout
source_group(cmake FILES ${CMAKE_FILES})
source_group(src FILES ${HEADER_FILES} ${SOURCE_FILES})
source_group(src\\ecore FILES ${HEADER_ECORE_FILES} ${SOURCE_ECORE_FILES})
source_group(src\\ecore\\tests FILES ${HEADER_ECORE_TESTS_FILES} ${SOURCE_ECORE_TESTS_FILES})
source_group(src-gen FILES ${GENERATED_HEADER_FILES} ${GENERATED_SOURCE_FILES})
source_group(src-gen\\ecore FILES ${GENERATED_HEADER_ECORE_FILES} ${GENERATED_SOURCE_ECORE_FILES})
source_group(src-gen\\ecore\\tests FILES ${GENERATED_HEADER_ECORE_TESTS_FILES} ${GENERATED_SOURCE_ECORE_TESTS_FILES})

# copy data into the current binary dir
get_filename_component(DATA_PATH "data" ABSOLUTE)
if(EXISTS "${DATA_PATH}")
    file(COPY "${DATA_PATH}" DESTINATION ${CMAKE_CURRENT_BINARY_DIR})
endif()

# tests
include ( BoostTest RESULT_VARIABLE BoosTest_FOUND )
if ( BoosTest_FOUND )
    boost_test_discover_tests( ${PROJECT_NAME} )
endif()

